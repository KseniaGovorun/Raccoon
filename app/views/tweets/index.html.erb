<div class="container mx-auto p-4">
  <h1 class="title">Untwitter</h1>

  <%= render "tweets/partials/index/create" %>

  <% @tweets.each do |tweet| %>
    <% if !tweet.retweet? %>
      <div class="box relative mb-4">
        <% Tweet.retweets(tweet.id).each do |retweet| %>
          <div class="box relative mt-2 mb-2 p-2 border-l-4 border-blue-500">
            <span>Retweeted by <%= retweet.user.username %></span>
            <%= button_to "Delete", tweet_path(retweet), method: :delete, class: "delete-link text-timestamp top-3 right-2" %>
          </div>
        <% end %>

        <%= render "tweets/partials/shared/user_data", tweet: tweet %>

        <%= turbo_frame_tag tweet do %>
          <p class="my-5 text-xl"><%= tweet.body %></p>

          <div class="text-timestamp flex justify-between items-center">
            <%= link_to "Open", tweet_path(tweet), class: "action-link", data: { turbo: false } %>
            <% if tweet.author?(current_user) %>
              <div class="flex space-x-2">
                <%= link_to "Edit", edit_tweet_path(tweet), class: "edit-link" %>
                <%= button_to "Delete", tweet_path(tweet), method: :delete, class: "delete-link", data: { turbo: false } %>
              </div>
            <% end %>
          </div>
        <% end %>

        <%= render "tweets/partials/shared/reaction", tweet: tweet %>
      </div>
    <% end %>
  <% end %>
</div>
